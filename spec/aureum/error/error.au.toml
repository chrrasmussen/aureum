program = { env = "AUREUM_TEST_EXEC" }
expected_stdout = ""
expected_exit_code = 1


[tests.missing-test-config]
program_arguments = ["AUREUM-THIS-FILE-DOES-NOT-EXIST"]
expected_stderr = """
No test configs found for the given paths
"""


[tests.missing-test-config-with-test-id]
program_arguments = ["AUREUM-THIS-FILE-DOES-NOT-EXIST:sub1"]
expected_stderr = """
error: Invalid value 'AUREUM-THIS-FILE-DOES-NOT-EXIST:sub1' for '<PATHS>...': Invalid path to test config

For more information try '--help'
"""
expected_exit_code = 2


[tests.invalid-test-config]
program_arguments = ["helpers/invalid-test-config.toml"]
expected_stdout = """
Running 0 tests:


Test result: OK (0 passed, 0 failed)
"""
expected_stderr = """
helpers/invalid-test-config.toml: Failed to parse test config
"""


[tests.empty-test-config]
program_arguments = ["helpers/empty-test-config.toml"]
expected_stdout = """
Running 0 tests:


Test result: OK (0 passed, 0 failed)
"""
expected_stderr = """
helpers/empty-test-config.toml:
  validation-errors:
    '':
    - The field 'program' is required
    - At least one expectation is required
"""


[tests.no-program-specified]
program_arguments = ["helpers/no-test-program.toml"]
expected_stdout = """
Running 0 tests:


Test result: OK (0 passed, 0 failed)
"""
expected_stderr = """
helpers/no-test-program.toml:
  validation-errors:
    '':
    - The field 'program' is required
"""


[tests.no-expectations]
program_arguments = ["helpers/no-expectations.toml"]
expected_stdout = """
Running 0 tests:


Test result: OK (0 passed, 0 failed)
"""
expected_stderr = """
helpers/no-expectations.toml:
  validation-errors:
    '':
    - At least one expectation is required
"""


[tests.missing-env-var]
program_arguments = ["helpers/missing-env-var.toml"]
expected_stdout = """
Running 0 tests:


Test result: OK (0 passed, 0 failed)
"""
expected_stderr = """
helpers/missing-env-var.toml:
  requirements:
    env:
      AUREUM_TEST_THIS_ENV_VAR_DOES_NOT_EXIST: ❌
  validation-errors:
    '':
    - Missing environment variable
"""


[tests.missing-external-file]
program_arguments = ["helpers/missing-external-file.toml"]
expected_stdout = """
Running 0 tests:


Test result: OK (0 passed, 0 failed)
"""
expected_stderr = """
helpers/missing-external-file.toml:
  requirements:
    files:
      AUREUM_TEST_THIS_FILE_DOES_NOT_EXIST: ❌
  validation-errors:
    '':
    - Missing external file
"""
