test_program = { env = "AUREUM_TEST_EXEC" }


[tests.summary-passing]
test_arguments = ["--show-all-tests", "--output-format", "summary", "helpers/passing-test.toml"]
expected_stdout = """
✅ ./helpers/passing-test.toml

Completed running 1 tests.
All tests passed.
"""
expected_stderr = ""
expected_exit_code = 0


[tests.summary-failing]
test_arguments = ["--show-all-tests", "--output-format", "summary", "helpers/failing-test.toml"]
expected_stdout = """
❌ ./helpers/failing-test.toml

Completed running 1 tests.
1 failures.
"""
expected_stderr = ""
expected_exit_code = 1


[tests.tap-passing]
test_arguments = ["--output-format", "tap", "helpers/passing-test.toml"]
expected_stdout = """
TAP version 14
1..1
ok     1 - ./helpers/passing-test.toml
"""
expected_stderr = ""
expected_exit_code = 0


[tests.tap-failing]
test_arguments = ["--output-format", "tap", "helpers/failing-test.toml"]
expected_stdout = """
TAP version 14
1..1
not ok 1 - ./helpers/failing-test.toml
  ---
  exit-code:
    expected: 42
    got: 0
  stderr:
    expected: STDERR
    got: ''
  stdout:
    expected: STDOUT
    got: Hello world
  ...
"""
expected_stderr = ""
expected_exit_code = 1


[tests.unknown]
test_arguments = ["--output-format", "UNKNOWN", "helpers/passing-test.toml"]
expected_stdout = ""
expected_stderr = """
error: Invalid value 'UNKNOWN' for '--output-format <OUTPUT_FORMAT>': Invalid output format

For more information try '--help'
"""
expected_exit_code = 2
